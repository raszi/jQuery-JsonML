<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Bulleted List Test</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
	<script type="text/javascript" src="assert.js"></script>
	<script type="text/javascript" src="../jquery.jsonml.js"></script>
</head>
<body>
<div id="content"></div>
<script type="text/javascript">
	var $c = $("#content");

	var JsonML = ["table", { "class" : "MyTable", "style" : "background-color:yellow" }, ["tr", ["td", { "class" : "MyTD", "style" : "border:1px solid black" }, "#550758" ], ["td", { "class" : "MyTD", "style" : "background-color:red" }, "Example text here" ] ], ["tr", ["td", { "class" : "MyTD", "style" : "border:1px solid black" }, "#993101" ], ["td", { "class" : "MyTD", "style" : "background-color:green" }, "127624015" ] ], ["tr", ["td", { "class" : "MyTD", "style" : "border:1px solid black" }, "#E33D87" ], ["td", { "class" : "MyTD", "style" : "background-color:blue" }, "\u00A0", ["span", { "style" : "background-color:maroon" }, "\u00A9" ], "\u00A0" ] ] ];

	$.jsonml(JsonML).appendTo($c);

	try { 
		// <table> check
		var $table = $("table", $c);
		assert($table.length == 1, "TABLE item number failure");

		// <tr> check
		var $tr = $("tr", $table);
		assert($tr.length == 3, "TR item number failure");

		// <td> check
		var $td = $("td", $tr);
		assert($td.length == 6, "TD item number failure");

		for (var i = 0; i < 6; i++) {
			assert($td.hasClass("MyTD"), "TD " + i + " class failure");
		}

		// the white-space is hardly checkable in IE
		var texts = [
			"#550758", "Example text here",
			"#993101", "127624015",
			"#E33D87"
		];

		$.each(texts, function( i, value ) {
			var curVal = $($td.get(i)).text();
			assert(curVal == value, "TD " + i + " content failure: '" + curVal + "'!='" + value + "'");
		});

		assert($table.hasClass("MyTable"), "TABLE class failure");

		// background check is problematic in opera and firefox
		if (!($.browser.opera || $.browser.mozilla)) {
			assert($table.css("background-color") == "yellow", "TABLE background color failure");

			var colorCheck = {
				"1": "red",
				"3": "green",
				"5": "blue"
			};

			$.each(colorCheck, function( no, bgColor ) {
				var curColor = $($td.get(Number(no))).css("background-color");
				assert(curColor == bgColor, "TD " + no + " background folor failure: '" + curColor + "'!='" + bgColor + "'");
			});
		}
	} catch( e ) {
		alert(e);
	}
</script>
</body>
</html>
